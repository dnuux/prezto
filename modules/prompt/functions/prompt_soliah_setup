#
# A simple theme that only shows relevant information.
#

function prompt_soliah_precmd {
  setopt LOCAL_OPTIONS
  unsetopt XTRACE KSH_ARRAYS

  if (( $+functions[git-info-fast] )); then
    git-info-fast
  fi
}

function prompt_soliah_setup {
  setopt LOCAL_OPTIONS
  unsetopt XTRACE KSH_ARRAYS
  prompt_opts=(cr percent subst)

  autoload -Uz add-zsh-hook
  add-zsh-hook precmd prompt_soliah_precmd

  zstyle ':omz:module:editor' completing '%B%F{red}...%f%b'

  zstyle ':omz:module:git' branch ':%F{red}%b%f'
  zstyle ':omz:module:git' info \
    'prompt'  ' %F{blue}git%f$(coalesce "%b")%s' \

  PROMPT='%{%F{cyan}%}%n%f on %{%F{red}%}%M%f in %{%F{blue}%}%~%b%{$reset_color%}${(e)git_info_fast[prompt]}
$ '
  SPROMPT='zsh: correct %F{red}%R%f to %F{blue}%r%f [nyae]? '
}

prompt_soliah_setup "$@"
